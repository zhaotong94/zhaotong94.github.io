<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-toc.min.css">
    <link rel="stylesheet" href="/css/mdb.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-beta1/js/bootstrap.bundle.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    
    

    <script src="/js/theme.js"></script>
    <script src="/js/common.js"></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How to create a small and smooth dynamic GIF for dynamical systems? | Tong&#39;Log</title>
<meta name="keywords" content="">
<meta name="description" content="When giving a presentation on STEM disciplines, we usually need to draw a gif of some dynamical systems to express our ideas clearly. However, creating a portable, fluid, and authentic gif is challenging, it is very hard to find suitable parameters for drawing a gif.">
<meta name="author" content="Tong">
<link rel="canonical" href="http://localhost:1313/blog/hcssdgds/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3f7471d1364ac2821f8f1e4385c785173052bce1f0f0a97e54765d123a4057db.css" integrity="sha256-P3Rx0TZKwoIfjx5DhceFFzBSvOHw8Kl&#43;VHZdEjpAV9s=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
        onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://localhost:1313/img/capybara.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/img/capybara.jpg">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/img/capybara.jpg">
<link rel="apple-touch-icon" href="http://localhost:1313/img/capybara.jpg">
<link rel="mask-icon" href="http://localhost:1313/img/capybara.jpg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/blog/hcssdgds/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>




<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script type="text/javascript">
    MathJax = {
      tex: {
        tags:"ams",
        inlineMath: [['$', '$']],
        displayMath: [['$$','$$']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  
    
    
    
    
  
  </script>
<script defer src="https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  

<meta property="og:title" content="How to create a small and smooth dynamic GIF for dynamical systems?" />
<meta property="og:description" content="When giving a presentation on STEM disciplines, we usually need to draw a gif of some dynamical systems to express our ideas clearly. However, creating a portable, fluid, and authentic gif is challenging, it is very hard to find suitable parameters for drawing a gif." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/blog/hcssdgds/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2024-10-23T14:05:34+08:00" />
<meta property="article:modified_time" content="2024-10-23T14:05:34+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="How to create a small and smooth dynamic GIF for dynamical systems?"/>
<meta name="twitter:description" content="When giving a presentation on STEM disciplines, we usually need to draw a gif of some dynamical systems to express our ideas clearly. However, creating a portable, fluid, and authentic gif is challenging, it is very hard to find suitable parameters for drawing a gif."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "‚úçBlog",
          "item": "http://localhost:1313/blog/"
        }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "How to create a small and smooth dynamic GIF for dynamical systems?",
      "item": "http://localhost:1313/blog/hcssdgds/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to create a small and smooth dynamic GIF for dynamical systems?",
  "name": "How to create a small and smooth dynamic GIF for dynamical systems?",
  "description": "When giving a presentation on STEM disciplines, we usually need to draw a gif of some dynamical systems to express our ideas clearly. However, creating a portable, fluid, and authentic gif is challenging, it is very hard to find suitable parameters for drawing a gif.",
  "keywords": [
    ""
  ],
  "articleBody": "Motivation When giving a presentation on STEM disciplines, we usually need to draw a gif of some dynamical systems to express our ideas clearly. However, creating a portable, fluid, and authentic gif is challenging, it is very hard to find suitable parameters for drawing a gif.\nChallenge No matter how long this process takes, we only have a limited time to watch (usually very short). How to define fluidity of an animation (comfortable to watch)? Due to the stability of the discretize dynamical system of interest, we can not arbitrarily choose a stepsize for the system. What is the relationship between the size of the created gif and fluidity? Analysis We define three concept for $i\\in\\{r,o\\}$: $$\r\\begin{align}\rD_i:\u0026=\\frac{\\Delta_i}{F_i},\\label{d}\\\\\rR_i:\u0026=\\frac{F_i}{T_i},\\\\\rS_i:\u0026=\\frac{R_i}{D_i},\\\\\rv_i:\u0026=D_i R_i, \\label{v}\r\\end{align}\r$$ where $r$ and $o$ represent the above quantities is measured in reality and observation respectively, $\\Delta_i$ is the total variation, or the total path length of things moving in the image measured by some reasonable metrics, $F_i$ is total number of images, $T_i$ is total time, $D_i$ is resolution (the average difference between two adjacent images in the series), $R_i$ is frame rate, $S_i$ is fluidity or smoothness of a gif, and $v_i$ is the velocity of things in images.\nIn our creating-a-gif-for-dynamical-systems case, $R_r$ is how many images are calculated per unit real time. Considering $$\r\\begin{align*}\r\\dot{\\theta}_t\u0026=-L^{\\prime}(t,\\theta_t),\\\\\r\\theta_{t+1} \u0026=\\theta_t-\\eta L^{\\prime}(t,\\theta_t),\r\\end{align*}\r$$ where $\\eta$ is learning rate. At every time step $t$, an image $\\theta_{t}$ is generated, and therefore $R_r=\\frac{1}{\\eta}$.\nIn order to guarantee the stability of the dynamical system, we have to increase $R_r$. However, if we save all these easy-to-calculate images into gif it is usually lead to prohibitively large gif file. So, we need to sample some images with compression ratio $k=\\frac{F_r}{F_o}$ and store them into gif. To keep the gif authentic (without distortion), we set $l=\\frac{T_r}{T_o}$, acceleration ratio, a constant (otherwise the process distorted) and therefore $$\r\\begin{align*}\rk \\eta\u0026=\\frac{l}{R_o},\\\\\r\\end{align*} $$ where $R_o$ is the FPS of gif (a constant). According to equations \\eqref{d}-\\eqref{v}, we have $$\r\\begin{align*}\rS_o\u0026=\\frac{R_o}{D_o}=\\frac{F^2_o}{T_o\\Delta}=\\frac{F^2_o}{T_o T_r v_r},\\\\\rF_o\u0026=\\frac{R_r T_r}{k}, \\end{align*}\r$$ where $\\Delta=\\Delta_r=\\Delta_o$ in this case, $F_o$ is proportional to the size of the gif file. Finally, we get the suitable compression ratio $k$ and corresponding gif size measured by $F_o$ $$\r\\begin{align*}\rk\u0026=\\frac{\\sqrt{T_r}}{\\eta\\sqrt{S_o T_o v_r}}, \\; v_r=|L^{\\prime}|,\\\\\rF_o\u0026=\\sqrt{S_o T_o T_r v_r}.\r\\end{align*}\r$$ ",
  "wordCount" : "391",
  "inLanguage": "en",
  "datePublished": "2024-10-23T14:05:34+08:00",
  "dateModified": "2024-10-23T14:05:34+08:00",
  "author":[{
    "@type": "Person",
    "name": "Tong"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/blog/hcssdgds/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Tong'Log",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/img/capybara.jpg"
    }
  }
}
</script>
    
    
    
</head>

<body class="" id="top">
<script>
    (function () {
        let  arr,reg = new RegExp("(^| )"+"change-themes"+"=([^;]*)(;|$)");
        if(arr = document.cookie.match(reg)) {
        } else {
            if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
                document.body.classList.add('dark');
                localStorage.setItem("pref-theme", 'dark');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem("pref-theme", 'light');
            }
        }
    })()

    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Tong&#39;Log (Alt + H)">
            <img src="http://localhost:1313/img/capybara.jpg" alt="logo" aria-label="logo"
                 height="35">Tong&#39;Log</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="üè†Home">
                <span>üè†Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/blog" title="‚úçBlog">
                <span>‚úçBlog</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/publications" title="üìÑPublications">
                <span>üìÑPublications</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags" title="üè∑Ô∏èTags">
                <span>üè∑Ô∏èTags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/cv" title="üë®‚Äçü¶±CV">
                <span>üë®‚Äçü¶±CV</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/faq" title="ü§îFAQ">
                <span>ü§îFAQ</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search" title="üîçSearch (Alt &#43; /)" accesskey=/>
                <span>üîçSearch</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }
</style>

<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="http://localhost:1313/">üè† Home</a>&nbsp;¬ª&nbsp;<a href="http://localhost:1313/blog/">‚úçBlog</a></div>
            <h1 class="post-title">
                How to create a small and smooth dynamic GIF for dynamical systems?
            </h1>
            <div class="post-description">
                When giving a presentation on STEM disciplines, we usually need to draw a gif of some dynamical systems to express our ideas clearly. However, creating a portable, fluid, and authentic gif is challenging, it is very hard to find suitable parameters for drawing a gif.
            </div>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>October 23, 2024
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>391 words
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>1 mins
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>Tong
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
                <a href="http://localhost:1313/tags/math/" style="color: var(--secondary)!important;">Math</a>
            </span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "http://localhost:1313/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId:  null , 
                                region:  null , 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#motivation" aria-label="Motivation">Motivation</a></li>
                <li>
                    <a href="#challenge" aria-label="Challenge">Challenge</a></li>
                <li>
                    <a href="#analysis" aria-label="Analysis">Analysis</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        if (elements) {
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                    (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                    return element;
                }
            }) || activeElement

            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                if (element === activeElement){
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
                } else {
                    document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
                }
            })
        }
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><h1 id="motivation">Motivation<a hidden class="anchor" aria-hidden="true" href="#motivation">#</a></h1>
<p>When giving a presentation on STEM disciplines, we usually need to draw a gif of some dynamical systems to express our ideas clearly. However, creating a portable, fluid, and authentic gif is challenging, it is very hard to find suitable parameters for drawing a gif.</p>
<h1 id="challenge">Challenge<a hidden class="anchor" aria-hidden="true" href="#challenge">#</a></h1>
<ol>
<li>No matter how long this process takes, we only have a limited time to watch (usually very short).</li>
<li>How to define fluidity of an animation (comfortable to watch)?</li>
<li>Due to the stability of the discretize dynamical system of interest, we can not arbitrarily choose a stepsize for the system.</li>
<li>What is the relationship between the size of the created gif and fluidity?</li>
</ol>
<h1 id="analysis">Analysis<a hidden class="anchor" aria-hidden="true" href="#analysis">#</a></h1>
<p>We define three concept for $i\in\{r,o\}$:
</p>
$$
\begin{align}
D_i:&=\frac{\Delta_i}{F_i},\label{d}\\
R_i:&=\frac{F_i}{T_i},\\
S_i:&=\frac{R_i}{D_i},\\
v_i:&=D_i R_i, \label{v}
\end{align}
$$
<p>
where $r$ and $o$ represent the above quantities is measured in reality and observation respectively, $\Delta_i$ is the <a href="https://en.wikipedia.org/wiki/Total_variation">total variation</a>, or the total path length of things moving in the image measured by some reasonable metrics, $F_i$ is total number of images, $T_i$ is total time, $D_i$ is resolution (the average difference between two adjacent images in the series), $R_i$ is frame rate, $S_i$ is fluidity or smoothness of a gif, and $v_i$ is the velocity of things in images.</p>
<p>In our creating-a-gif-for-dynamical-systems case, $R_r$ is how many images are calculated per unit real time. Considering
</p>
$$
\begin{align*}
\dot{\theta}_t&=-L^{\prime}(t,\theta_t),\\
\theta_{t+1} &=\theta_t-\eta L^{\prime}(t,\theta_t),
\end{align*}
$$
<p>
where $\eta$ is learning rate. At every time step $t$, an image $\theta_{t}$ is generated, and therefore $R_r=\frac{1}{\eta}$.</p>
<p>In order to guarantee the stability of the dynamical system, we have to increase $R_r$. However, if we save all these easy-to-calculate images into gif it is usually lead to prohibitively large gif file. So, we need to sample some images with compression ratio $k=\frac{F_r}{F_o}$ and store them into gif. To keep the gif authentic (without distortion), we set $l=\frac{T_r}{T_o}$, acceleration ratio, a constant (otherwise the process distorted) and therefore
</p>
$$
\begin{align*}
k \eta&=\frac{l}{R_o},\\
\end{align*} 
$$
<p>
where $R_o$ is the FPS of gif (a constant). According to equations \eqref{d}-\eqref{v}, we have
</p>
$$
\begin{align*}
S_o&=\frac{R_o}{D_o}=\frac{F^2_o}{T_o\Delta}=\frac{F^2_o}{T_o T_r v_r},\\
F_o&=\frac{R_r T_r}{k}, 
\end{align*}
$$
<p>
where $\Delta=\Delta_r=\Delta_o$ in this case, $F_o$ is proportional to the size of the gif file. Finally, we get the suitable compression ratio $k$ and corresponding gif size measured by $F_o$
</p>
$$
\begin{align*}
k&=\frac{\sqrt{T_r}}{\eta\sqrt{S_o T_o v_r}}, \; v_r=|L^{\prime}|,\\
F_o&=\sqrt{S_o T_o T_r v_r}.
\end{align*}
$$


            
        </div>

        
        
        
        
        
        

        <footer class="post-footer">
            

        </footer>
    </div>

<style>
    .comments_details summary::marker {
        font-size: 15px;
        content: 'üëâComments';
        color: var(--content);
    }
    .comments_details[open] summary::marker{
        font-size: 15px;
        content: 'üëáCollapse';
        color: var(--content);
    }
</style>


<div>
    <details class="comments_details">
        <summary style="cursor: pointer; margin: 50px 0 20px 0;width: 130px;">
            <span style="font-size: 20px;color: var(--content);">...</span>
        </summary>
        <div id="tcomment"></div>
    </details>
    <script src="https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js">
    </script>
    <script>
        twikoo.init({
            envId:  null ,
        el: "#tcomment",
            lang: 'zh-CN',
            region:  null ,
        path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        })
    </script>
</div>
</article>
</main>

<footer class="footer">
    <span>
        Copyright
        &copy;
        2023-2024
        <a href="http://localhost:1313/" style="color:#939393;">Tong&#39;Log</a>
        <span>
            Powered by
            <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
            <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
        </span>
    </span>
    
    <span id="busuanzi_container">
        <span class="fa fa-user"></span> <span id="busuanzi_value_site_uv"></span>
        <span class="fa fa-eye"></span> <span id="busuanzi_value_site_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\n‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî\r\n' +
                    
                
                    "Copyright Notice: This article is an original piece by '+Tong\u0027Log+', licensed under the CC 4.0 BY-SA copyright agreement. Please include the original source link and this statement when reprinting." + "\r\n Original link: " + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\n‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî\r\n' +
                    
                
                    "Copyright Notice: This article is an original piece by '+Tong\u0027Log+', licensed under the CC 4.0 BY-SA copyright agreement. Please include the original source link and this statement when reprinting." + "\r\n Original link: " + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '‚úÇÔ∏ècopy';

        function copyingDone() {
            copybutton.innerText = 'üëåüèªcopied!';
            setTimeout(() => {
                copybutton.innerText = '‚úÇÔ∏ècopy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\n‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî\r\n' +
                
                
                    "Copyright Notice: This article is an original piece by '+Tong\u0027Log+', licensed under the CC 4.0 BY-SA copyright agreement. Please include the original source link and this statement when reprinting." + "\r\n Original link: " + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        macTool.setAttribute('class', 'mac-tool')
        macTool1.setAttribute('class', 'mac bb1')
        macTool2.setAttribute('class', 'mac bb2')
        macTool3.setAttribute('class', 'mac bb3')
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>




</body>

</html>
